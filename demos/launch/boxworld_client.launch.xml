<launch>
  <!--This file is for a simple a "client" running gazebo-->
  <arg name="gazebo_version" default="11"/>
  <arg name="viz_config_file" default="$(find-pkg-share demos)/include/box_world/box_world.rviz"/>
  <let name="world_path" value="$(find-pkg-share rmf_demo_maps)/maps/box_world/box_world.world" />
  <let name="model_path" value="$(find-pkg-share rmf_demo_maps)/maps/box_world/models:$(find-pkg-share rmf_demo_assets)/models:/usr/share/gazebo-$(var gazebo_version)/models" />
  <let name="resource_path" value="$(find-pkg-share rmf_demo_assets):/usr/share/gazebo-$(var gazebo_version)" />
  <let name="plugin_path" value="$(find-pkg-prefix rmf_gazebo_plugins)/lib:$(find-pkg-prefix building_gazebo_plugins)/lib" />

  <executable cmd="gzserver --verbose -s libgazebo_ros_factory.so -s libgazebo_ros_init.so $(var world_path)" output="both">
    <env name="GAZEBO_MODEL_PATH" value="$(var model_path)" />
    <env name="GAZEBO_RESOURCE_PATH" value="$(var resource_path)" />
    <env name="GAZEBO_PLUGIN_PATH" value="$(var plugin_path)" />
    <env name="GAZEBO_MODEL_DATABASE_URI" value="" />
  </executable>
  
  <executable cmd="gzclient --verbose $(var world_path)" output="both">
    <env name="GAZEBO_MODEL_PATH" value="$(var model_path)" />
    <env name="GAZEBO_RESOURCE_PATH" value="$(var resource_path)" />
    <env name="GAZEBO_PLUGIN_PATH" value="$(var plugin_path)" />
  </executable>

  <include file="$(find-pkg-share visualizer)/visualizer.xml">
    <arg name="map_name" value="L1"/>
    <arg name="viz_config_file" value ="$(var viz_config_file)"/>
  </include>
</launch>